<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="755px" preserveAspectRatio="none" style="width:1190px;height:755px;background:#FFFFFF;" version="1.1" viewBox="0 0 1190 755" width="1190px" zoomAndPan="magnify"><defs/><g><!--MD5=[979da56a7f83e2393dc758167ae295d0]
cluster Server--><g id="cluster_Server"><rect fill="none" height="464" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="1110" x="7" y="150.5"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="1097" y="155.5"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="1095" y="157.5"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="1095" y="161.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="538" y="178.0332">Server</text></g><!--MD5=[5ec7eedd57310648f8059ffb2621ca4b]
cluster docker--><g id="cluster_docker"><rect fill="none" height="284" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="990" x="103" y="211.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="222" x="487" y="228.0332">Docker Compose - profile 'prod'</text></g><!--MD5=[1378079a3eb208dbe7e22fc54a3fce11]
cluster promtail--><g id="cluster_promtail"><polygon fill="none" points="127,265.5,137,255.5,728,255.5,728,358.5,718,368.5,127,368.5,127,265.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="718" x2="728" y1="265.5" y2="255.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="127" x2="718" y1="265.5" y2="265.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="718" x2="718" y1="265.5" y2="368.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="57" x="395" y="283.0332">promtail</text></g><!--MD5=[5a8b7ee3eae4de21b4edbcb4d9e5d3d3]
cluster oem-web-prod--><g id="cluster_oem-web-prod"><polygon fill="none" points="831,334.5,841,324.5,1077,324.5,1077,469.5,1067,479.5,831,479.5,831,334.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1077" y1="334.5" y2="324.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="831" x2="1067" y1="334.5" y2="334.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="334.5" y2="479.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="102" x="899" y="352.0332">oem-web-prod</text></g><!--MD5=[6388e1a0d028400310670bd3eeb67932]
cluster Grafana--><g id="cluster_Grafana"><path d="M1089.8522,654.9499 C1092.5266,648.6585 1097.239,647.1196 1102.514,652.0033 C1106.3729,645.2805 1110.5516,643.9737 1116.2759,649.9878 C1119.3359,642.3463 1126.0496,641.6146 1130.2634,648.9071 C1134.5767,642.3245 1139.2542,643.9557 1142.9805,649.5217 C1148.4241,644.1308 1154.0722,644.5249 1157.924,651.4526 C1164.2915,646.0761 1169.2126,647.7552 1171.5143,655.6242 C1179.2101,658.4649 1178.7236,665.0485 1173.1509,669.4588 C1179.1374,674.1298 1179.01,678.221 1172.1558,681.8618 C1179.1323,684.6719 1181.0138,690.8022 1174.4645,695.8454 C1180.4008,699.7551 1180.6269,706.1767 1174.017,709.6806 C1179.5131,714.9058 1180.6158,719.4653 1172.9408,723.6778 C1178.8015,729.4211 1179.5823,735.3638 1170.6513,738.8792 C1166.961,744.7399 1161.7849,744.3852 1158.0502,738.9287 C1155.2986,746.9346 1148.479,746.3577 1144.1718,740.4842 C1140.4721,746.7323 1134.2218,748.108 1130.1773,740.8412 C1126.2869,747.2238 1120.1049,747.1347 1117.0016,740.0699 C1111.4783,747.3513 1106.8486,746.7481 1101.8988,739.4747 C1097.4933,744.9546 1093.8738,744.1274 1090.1571,738.7312 C1083.0924,735.4393 1080.3757,730.5094 1086.707,724.066 C1078.6799,721.8946 1078.4598,717.5257 1082.9178,711.5687 C1074.2672,708.2304 1074.0598,701.5286 1081.2947,696.4814 C1076.634,690.7681 1076.8234,686.4624 1084.2613,683.5179 C1078.0382,677.8992 1079.3662,672.0088 1086.8766,668.8365 C1080.9773,663.6036 1082.0406,657.2448 1089.8522,654.9499 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="55" x="1101.5" y="673.0332">Grafana</text></g><g id="cluster_##20"><path d="M939.4661,675.4069 C942.1266,670.151 946.6623,669.3333 950.9839,673.3417 C953.9403,668.028 957.3132,666.9637 961.4617,672.1525 C963.1563,666.2643 967.8769,666.4292 971.3341,670.3849 C974.5749,663.4987 978.5195,662.8179 984.0098,668.0275 C987.0791,661.8642 990.3203,661.8648 994.5482,666.9411 C998.7771,662.8308 1001.9614,663.8344 1004.115,669.0663 C1008.5112,664.0097 1013.096,664.6785 1016.2141,670.4893 C1020.5999,665.4251 1024.3324,665.9456 1027.9884,671.3131 C1032.5946,667.1152 1036.0549,668.1528 1038.2224,673.8384 C1042.1571,669.6405 1045.8117,669.9692 1048.3091,675.3516 C1057.2217,679.3263 1057.9649,683.8287 1050.5535,690.2607 C1057.7834,693.8081 1059.2762,700.5891 1052.1351,705.6168 C1059.6526,711.1826 1060.1145,718.6702 1051.0175,723.1787 C1058.1272,729.8497 1056.856,734.6042 1048.0513,738.1147 C1046.1038,743.2246 1041.8202,743.6258 1038.5436,739.48 C1034.4577,744.3027 1031.3309,743.2009 1027.9957,738.6365 C1024.3716,743.7619 1020.3983,744.1828 1016.295,739.1907 C1012.488,744.6334 1008.2987,743.5976 1005.2181,738.4323 C1002.0177,743.7462 998.5393,743.3901 994.9288,738.8611 C992.0545,744.517 986.875,744.6908 983.4846,739.4006 C980.5542,744.401 976.1429,743.7579 973.1347,739.4876 C969.6823,744.8838 965.6625,745.7449 961.9339,739.7594 C957.5382,744.2415 953.7199,744.8166 950.4134,738.5879 C947.3807,743.8919 942.5334,742.9222 939.6203,738.4558 C931.6591,734.9838 929.5319,730.1642 935.9856,723.2472 C927.9874,719.3923 925.4019,711.6483 933.5731,705.5848 C926.5378,699.8675 927.9237,693.4937 936.3061,690.5856 C929.2237,684.3541 931.9305,678.595 939.4661,675.4069 " fill="none" style="stroke:#181818;stroke-width:1.0;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="247" y="129.4238">80</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="249" y="144.5"/><!--MD5=[fe722160842ab3083f161a2a7f9d8b06]
entity promLoc--><g id="elem_promLoc"><path d="M159.5,542.5 L200.5,542.5 A3.75,3.75 0 0 1 203,545 L210,563.5 L234.5,563.5 A2.5,2.5 0 0 1 237,566 L237,595.6094 A2.5,2.5 0 0 1 234.5,598.1094 L159.5,598.1094 A2.5,2.5 0 0 1 157,595.6094 L157,545 A2.5,2.5 0 0 1 159.5,542.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="157" x2="210" y1="563.5" y2="563.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="167" y="585.0332">promtail</text></g><!--MD5=[3b39491c4ae0f967d0fda10cc6fa8ffe]
entity logLoc--><g id="elem_logLoc"><path d="M288,542.5 L329,542.5 A3.75,3.75 0 0 1 331.5,545 L338.5,563.5 L360,563.5 A2.5,2.5 0 0 1 362.5,566 L362.5,595.6094 A2.5,2.5 0 0 1 360,598.1094 L288,598.1094 A2.5,2.5 0 0 1 285.5,595.6094 L285.5,545 A2.5,2.5 0 0 1 288,542.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="285.5" x2="338.5" y1="563.5" y2="563.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="295.5" y="585.0332">/var/log</text></g><!--MD5=[8a1bc4818159efcbc0ef1e4cbabd56ff]
entity contLoc--><g id="elem_contLoc"><path d="M400,542.5 L441,542.5 A3.75,3.75 0 0 1 443.5,545 L450.5,563.5 L584,563.5 A2.5,2.5 0 0 1 586.5,566 L586.5,595.6094 A2.5,2.5 0 0 1 584,598.1094 L400,598.1094 A2.5,2.5 0 0 1 397.5,595.6094 L397.5,545 A2.5,2.5 0 0 1 400,542.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="397.5" x2="450.5" y1="563.5" y2="563.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="407.5" y="585.0332">/var/lib/docker/containers</text></g><!--MD5=[875c34bedf132272c73e8bf9e31e6d44]
entity promInst--><g id="elem_promInst"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="622" y="300.5"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="692" y="305.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="690" y="307.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="690" y="311.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="637" y="335.0332">promtail</text></g><!--MD5=[1a8b14acf4dc880aa72774a119d7c5e8]
entity promRem--><g id="elem_promRem"><path d="M146,296.5 L187,296.5 A3.75,3.75 0 0 1 189.5,299 L196.5,317.5 L248,317.5 A2.5,2.5 0 0 1 250.5,320 L250.5,349.6094 A2.5,2.5 0 0 1 248,352.1094 L146,352.1094 A2.5,2.5 0 0 1 143.5,349.6094 L143.5,299 A2.5,2.5 0 0 1 146,296.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="143.5" x2="196.5" y1="317.5" y2="317.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="153.5" y="339.0332">/etc/promtail</text></g><!--MD5=[25ffd4bc1314c23ec09359623d3cc278]
entity logRem--><g id="elem_logRem"><path d="M288,296.5 L329,296.5 A3.75,3.75 0 0 1 331.5,299 L338.5,317.5 L360,317.5 A2.5,2.5 0 0 1 362.5,320 L362.5,349.6094 A2.5,2.5 0 0 1 360,352.1094 L288,352.1094 A2.5,2.5 0 0 1 285.5,349.6094 L285.5,299 A2.5,2.5 0 0 1 288,296.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="285.5" x2="338.5" y1="317.5" y2="317.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="295.5" y="339.0332">/var/log</text></g><!--MD5=[9e1b1bfa93650452d9caff88db08b3e1]
entity contRem--><g id="elem_contRem"><path d="M400,296.5 L441,296.5 A3.75,3.75 0 0 1 443.5,299 L450.5,317.5 L584,317.5 A2.5,2.5 0 0 1 586.5,320 L586.5,349.6094 A2.5,2.5 0 0 1 584,352.1094 L400,352.1094 A2.5,2.5 0 0 1 397.5,349.6094 L397.5,299 A2.5,2.5 0 0 1 400,296.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="397.5" x2="450.5" y1="317.5" y2="317.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="407.5" y="339.0332">/var/lib/docker/containers</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="841" y="303.4238">80</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="843" y="318.5"/><!--MD5=[a0fef4f34cb3559b44f1c4ed44c10eb8]
entity Apache--><g id="elem_Apache"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="973" y="415.5"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1041" y="420.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1039" y="422.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1039" y="426.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="988" y="450.0332">Apache</text></g><!--MD5=[331b67947ba2840a66d34c20f83daee9]
entity Loki--><g id="elem_Loki"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="1096" y="681.5"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1142" y="686.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1140" y="688.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1140" y="692.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="1111" y="716.0332">Loki</text></g><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><g id="elem_db"><path d="M946,692 C946,682 993,682 993,682 C993,682 1040,682 1040,692 L1040,718.6094 C1040,728.6094 993,728.6094 993,728.6094 C993,728.6094 946,728.6094 946,718.6094 L946,692 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M946,692 C946,702 993,702 993,702 C993,702 1040,702 1040,692 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="956" y="720.5332">PostGIS DB</text></g><!--MD5=[e9dede37b31fdda9664526f66258b036]
entity Browser--><g id="elem_Browser"><ellipse cx="255" cy="14" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M255,22 L255,49 M242,30 L268,30 M255,49 L242,64 M255,49 L268,64 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="229.5" y="80.0332">Browser</text></g><!--MD5=[50db60e91649bd4b7930dc70ac143265]
link promRem to promLoc--><g id="link_promRem_promLoc"><path d="M197,352.54 C197,399.45 197,495.35 197,542.33 " fill="none" id="promRem-promLoc" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="198" y="444.9951">volume</text></g><!--MD5=[22fcf1e33b40493c5e2fc9dd2c31ffd5]
link logRem to logLoc--><g id="link_logRem_logLoc"><path d="M324,352.54 C324,399.45 324,495.35 324,542.33 " fill="none" id="logRem-logLoc" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="325" y="444.9951">volume</text></g><!--MD5=[5ab18d128b9e03ee7a87eeb6c6f98176]
link contRem to contLoc--><g id="link_contRem_contLoc"><path d="M492,352.54 C492,399.45 492,495.35 492,542.33 " fill="none" id="contRem-contLoc" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="493" y="444.9951">volume</text></g><!--MD5=[eb490ff470c5a146dc7f61e77394fe28]
link Apache to db--><g id="link_Apache_db"><path d="M1014.87,463.93 C1010.44,512.61 1000.27,624.49 995.53,676.71 " fill="none" id="Apache-to-db" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="995.06,681.88,999.8428,673.2704,995.5036,676.8997,991.8743,672.5606,995.06,681.88" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5a991882528c63219e1b5976c28aec7f]
link Browser to 80docker--><g id="link_Browser_80docker"><path d="M255,83.64 C255,103.54 255,126.38 255,139.25 " fill="none" id="Browser-to-80docker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="255,144.42,259,135.42,255,139.42,251,135.42,255,144.42" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[cb2118ce9ce00fc0fce55828fc161e98]
link 80docker to 80webProd--><g id="link_80docker_80webProd"><path d="M261.29,151.48 C310.96,151.44 640.32,152.81 728,195.5 C784.71,223.11 828.58,289.32 843.49,314 " fill="none" id="80docker-to-80webProd" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="846.08,318.37,844.9178,308.59,843.5243,314.0725,838.0418,312.679,846.08,318.37" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[61323abf26bab5d1b04916da505b1a4b]
link 80webProd to Apache--><g id="link_80webProd_Apache"><path d="M855.38,329.79 C875.26,343.16 937.18,384.81 978.35,412.5 " fill="none" id="80webProd-to-Apache" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="982.52,415.31,977.2899,406.9646,978.373,412.5168,972.8207,413.5999,982.52,415.31" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6c9defcba7df4322285ad52fbcdac593]
link promInst to Loki--><g id="link_promInst_Loki"><path d="M690.72,348.76 C703.14,359.35 719.23,370.77 736,376.5 C755.25,383.07 1087.18,370.57 1102,384.5 C1183.22,460.81 1154.07,613.03 1137.39,676.11 " fill="none" id="promInst-to-Loki" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1136.01,681.21,1142.2122,673.5594,1137.3099,676.3819,1134.4873,671.4796,1136.01,681.21" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6e633ce814d9792c5aa493bb8deb9c85]
@startuml prod_deployment

component Server {
  port "80" as 80docker
  rectangle "Docker Compose - profile 'prod'" as docker {
    node promtail {
      component promtail as promInst
      folder "/etc/promtail" as promRem
      folder "/var/log" as logRem
      folder "/var/lib/docker/containers" as contRem
    }
    node "oem-web-prod" {
      port "80" as 80webProd
      component Apache
    }
  }
  folder "promtail" as promLoc
  folder "/var/log" as logLoc
  folder "/var/lib/docker/containers" as contLoc
}
cloud Grafana {
  component Loki
}
actor Browser
cloud {
  database "PostGIS DB" as db
}

promRem - - - promLoc : volume
logRem - - - logLoc : volume
contRem - - - contLoc : volume

Apache - - -> db

Browser - -> 80docker

80docker - -> 80webProd

80webProd - -> Apache
promInst - - - -> Loki

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: it
Country: IT
--></g></svg>