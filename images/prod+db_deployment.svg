<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="810px" preserveAspectRatio="none" style="width:1666px;height:810px;background:#FFFFFF;" version="1.1" viewBox="0 0 1666 810" width="1666px" zoomAndPan="magnify"><defs/><g><!--MD5=[979da56a7f83e2393dc758167ae295d0]
cluster Server--><g id="cluster_Server"><rect fill="none" height="614" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="1535" x="7" y="190.5"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="1522" y="195.5"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="1520" y="197.5"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="1520" y="201.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="750.5" y="218.0332">Server</text></g><!--MD5=[5ec7eedd57310648f8059ffb2621ca4b]
cluster docker--><g id="cluster_docker"><rect fill="none" height="509" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="990" x="103" y="271.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="248" x="474" y="288.0332">Docker Compose - profile 'prod+db'</text></g><!--MD5=[ffe4ad9ccf7072d049fa6ad8564d92a1]
cluster oem-postgis--><g id="cluster_oem-postgis"><polygon fill="none" points="374,622.5,384,612.5,577,612.5,577,754.5,567,764.5,374,764.5,374,622.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="567" x2="577" y1="622.5" y2="612.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="374" x2="567" y1="622.5" y2="622.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="567" x2="567" y1="622.5" y2="764.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87" x="428" y="640.0332">oem-postgis</text></g><!--MD5=[1378079a3eb208dbe7e22fc54a3fce11]
cluster promtail--><g id="cluster_promtail"><polygon fill="none" points="468,325.5,478,315.5,1069,315.5,1069,418.5,1059,428.5,468,428.5,468,325.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1059" x2="1069" y1="325.5" y2="315.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="468" x2="1059" y1="325.5" y2="325.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="1059" x2="1059" y1="325.5" y2="428.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="57" x="736" y="343.0332">promtail</text></g><!--MD5=[5a8b7ee3eae4de21b4edbcb4d9e5d3d3]
cluster oem-web-prod--><g id="cluster_oem-web-prod"><polygon fill="none" points="206,394.5,216,384.5,452,384.5,452,529.5,442,539.5,206,539.5,206,394.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="442" x2="452" y1="394.5" y2="384.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="206" x2="442" y1="394.5" y2="394.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="442" x2="442" y1="394.5" y2="539.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="102" x="274" y="412.0332">oem-web-prod</text></g><!--MD5=[6388e1a0d028400310670bd3eeb67932]
cluster Grafana--><g id="cluster_Grafana"><path d="M1567.8522,139.9499 C1570.5266,133.6585 1575.239,132.1196 1580.514,137.0033 C1584.3729,130.2805 1588.5516,128.9737 1594.2759,134.9878 C1597.3359,127.3463 1604.0496,126.6146 1608.2634,133.9071 C1612.5767,127.3245 1617.2542,128.9557 1620.9805,134.5217 C1626.4241,129.1308 1632.0722,129.5249 1635.924,136.4526 C1642.2915,131.0761 1647.2126,132.7552 1649.5143,140.6242 C1657.2101,143.4649 1656.7236,150.0485 1651.1509,154.4588 C1657.1374,159.1298 1657.01,163.221 1650.1558,166.8618 C1657.1323,169.6719 1659.0138,175.8022 1652.4645,180.8454 C1658.4008,184.7551 1658.6269,191.1767 1652.017,194.6806 C1657.5131,199.9058 1658.6158,204.4653 1650.9408,208.6778 C1656.8015,214.4211 1657.5823,220.3638 1648.6513,223.8792 C1644.961,229.7399 1639.7849,229.3852 1636.0502,223.9287 C1633.2986,231.9346 1626.479,231.3577 1622.1718,225.4842 C1618.4721,231.7323 1612.2218,233.108 1608.1773,225.8412 C1604.2869,232.2238 1598.1049,232.1347 1595.0016,225.0699 C1589.4783,232.3513 1584.8486,231.7481 1579.8988,224.4747 C1575.4933,229.9546 1571.8738,229.1274 1568.1571,223.7312 C1561.0924,220.4393 1558.3757,215.5094 1564.707,209.066 C1556.6799,206.8946 1556.4598,202.5257 1560.9178,196.5687 C1552.2672,193.2304 1552.0598,186.5286 1559.2947,181.4814 C1554.634,175.7681 1554.8234,171.4624 1562.2613,168.5179 C1556.0382,162.8992 1557.3662,157.0088 1564.8766,153.8365 C1558.9773,148.6036 1560.0406,142.2448 1567.8522,139.9499 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="55" x="1579.5" y="158.0332">Grafana</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="152" y="169.4238">80</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="154" y="184.5"/><!--MD5=[fe722160842ab3083f161a2a7f9d8b06]
entity promLoc--><g id="elem_promLoc"><path d="M1111.5,584.5 L1152.5,584.5 A3.75,3.75 0 0 1 1155,587 L1162,605.5 L1186.5,605.5 A2.5,2.5 0 0 1 1189,608 L1189,637.6094 A2.5,2.5 0 0 1 1186.5,640.1094 L1111.5,640.1094 A2.5,2.5 0 0 1 1109,637.6094 L1109,587 A2.5,2.5 0 0 1 1111.5,584.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1109" x2="1162" y1="605.5" y2="605.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="1119" y="627.0332">promtail</text></g><!--MD5=[3b39491c4ae0f967d0fda10cc6fa8ffe]
entity logLoc--><g id="elem_logLoc"><path d="M1227,584.5 L1268,584.5 A3.75,3.75 0 0 1 1270.5,587 L1277.5,605.5 L1299,605.5 A2.5,2.5 0 0 1 1301.5,608 L1301.5,637.6094 A2.5,2.5 0 0 1 1299,640.1094 L1227,640.1094 A2.5,2.5 0 0 1 1224.5,637.6094 L1224.5,587 A2.5,2.5 0 0 1 1227,584.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1224.5" x2="1277.5" y1="605.5" y2="605.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1234.5" y="627.0332">/var/log</text></g><!--MD5=[8a1bc4818159efcbc0ef1e4cbabd56ff]
entity contLoc--><g id="elem_contLoc"><path d="M1339,584.5 L1380,584.5 A3.75,3.75 0 0 1 1382.5,587 L1389.5,605.5 L1523,605.5 A2.5,2.5 0 0 1 1525.5,608 L1525.5,637.6094 A2.5,2.5 0 0 1 1523,640.1094 L1339,640.1094 A2.5,2.5 0 0 1 1336.5,637.6094 L1336.5,587 A2.5,2.5 0 0 1 1339,584.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1336.5" x2="1389.5" y1="605.5" y2="605.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="1346.5" y="627.0332">/var/lib/docker/containers</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="376" y="591.4238">5432</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="386" y="606.5"/><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><g id="elem_db"><path d="M467,711.5 C467,701.5 514,701.5 514,701.5 C514,701.5 561,701.5 561,711.5 L561,738.1094 C561,748.1094 514,748.1094 514,748.1094 C514,748.1094 467,748.1094 467,738.1094 L467,711.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M467,711.5 C467,721.5 514,721.5 514,721.5 C514,721.5 561,721.5 561,711.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="477" y="740.0332">PostGIS DB</text></g><!--MD5=[875c34bedf132272c73e8bf9e31e6d44]
entity promInst--><g id="elem_promInst"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="963" y="360.5"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1033" y="365.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1031" y="367.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1031" y="371.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="978" y="395.0332">promtail</text></g><!--MD5=[1a8b14acf4dc880aa72774a119d7c5e8]
entity promRem--><g id="elem_promRem"><path d="M487,356.5 L528,356.5 A3.75,3.75 0 0 1 530.5,359 L537.5,377.5 L589,377.5 A2.5,2.5 0 0 1 591.5,380 L591.5,409.6094 A2.5,2.5 0 0 1 589,412.1094 L487,412.1094 A2.5,2.5 0 0 1 484.5,409.6094 L484.5,359 A2.5,2.5 0 0 1 487,356.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="484.5" x2="537.5" y1="377.5" y2="377.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="494.5" y="399.0332">/etc/promtail</text></g><!--MD5=[25ffd4bc1314c23ec09359623d3cc278]
entity logRem--><g id="elem_logRem"><path d="M629,356.5 L670,356.5 A3.75,3.75 0 0 1 672.5,359 L679.5,377.5 L701,377.5 A2.5,2.5 0 0 1 703.5,380 L703.5,409.6094 A2.5,2.5 0 0 1 701,412.1094 L629,412.1094 A2.5,2.5 0 0 1 626.5,409.6094 L626.5,359 A2.5,2.5 0 0 1 629,356.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="626.5" x2="679.5" y1="377.5" y2="377.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="636.5" y="399.0332">/var/log</text></g><!--MD5=[9e1b1bfa93650452d9caff88db08b3e1]
entity contRem--><g id="elem_contRem"><path d="M741,356.5 L782,356.5 A3.75,3.75 0 0 1 784.5,359 L791.5,377.5 L925,377.5 A2.5,2.5 0 0 1 927.5,380 L927.5,409.6094 A2.5,2.5 0 0 1 925,412.1094 L741,412.1094 A2.5,2.5 0 0 1 738.5,409.6094 L738.5,359 A2.5,2.5 0 0 1 741,356.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="738.5" x2="791.5" y1="377.5" y2="377.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="748.5" y="399.0332">/var/lib/docker/containers</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="216" y="363.4238">80</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="218" y="378.5"/><!--MD5=[a0fef4f34cb3559b44f1c4ed44c10eb8]
entity Apache--><g id="elem_Apache"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="348" y="475.5"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="416" y="480.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="414" y="482.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="414" y="486.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="363" y="510.0332">Apache</text></g><!--MD5=[331b67947ba2840a66d34c20f83daee9]
entity Loki--><g id="elem_Loki"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="1574" y="166.5"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1620" y="171.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1618" y="173.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1618" y="177.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="1589" y="201.0332">Loki</text></g><!--MD5=[e9dede37b31fdda9664526f66258b036]
entity Browser--><g id="elem_Browser"><ellipse cx="160" cy="14" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M160,22 L160,49 M147,30 L173,30 M160,49 L147,64 M160,49 L173,64 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="134.5" y="80.0332">Browser</text></g><!--MD5=[ca91e133679fb377bc773829be79666e]
reverse link Loki to promInst--><g id="link_Loki_promInst"><path d="M1579.45,218.22 C1570.6,225.66 1560.39,233.15 1550,238.5 C1378.96,326.56 1149.24,365.05 1053.18,378.04 " fill="none" id="Loki-backto-promInst" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1583.67,214.59,1574.2335,217.4101,1579.8737,217.844,1579.4399,223.4841,1583.67,214.59" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[50db60e91649bd4b7930dc70ac143265]
link promRem to promLoc--><g id="link_promRem_promLoc"><path d="M563.35,412.76 C597.88,448.08 663.32,508.75 732,539.5 C861.24,597.37 1032.26,608.91 1108.88,611.08 " fill="none" id="promRem-promLoc" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="733" y="504.9951">volume</text></g><!--MD5=[22fcf1e33b40493c5e2fc9dd2c31ffd5]
link logRem to logLoc--><g id="link_logRem_logLoc"><path d="M690.18,412.72 C699.23,421.27 709.95,430.14 721,436.5 C852.69,512.31 901.4,496.04 1047,539.5 C1117.78,560.63 1137.91,558.36 1207,584.5 C1212.65,586.64 1218.51,589.13 1224.22,591.73 " fill="none" id="logRem-logLoc" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="1048" y="504.9951">volume</text></g><!--MD5=[5ab18d128b9e03ee7a87eeb6c6f98176]
link contRem to contLoc--><g id="link_contRem_contLoc"><path d="M886.66,412.58 C905.13,421.12 926.16,430.01 946,436.5 C1009.47,457.24 1029.32,447.43 1093,467.5 C1196.11,500 1310.86,552.59 1376.63,584.42 " fill="none" id="contRem-contLoc" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="1280" y="504.9951">volume</text></g><!--MD5=[1276741ab19b315a499829bc13fea030]
link Apache to 5432db--><g id="link_Apache_5432db"><path d="M392,523.77 C392,547.53 392,583.35 392,600.96 " fill="none" id="Apache-to-5432db" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="392,606.19,396,597.19,392,601.19,388,597.19,392,606.19" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5a991882528c63219e1b5976c28aec7f]
link Browser to 80docker--><g id="link_Browser_80docker"><path d="M160,83.71 C160,115.73 160,159.27 160,179.01 " fill="none" id="Browser-to-80docker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="160,184.33,164,175.33,160,179.33,156,175.33,160,184.33" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[cb2118ce9ce00fc0fce55828fc161e98]
link 80docker to 80webProd--><g id="link_80docker_80webProd"><path d="M166.08,196.35 C177.8,206.11 203.29,229.41 214,255.5 C230.78,296.39 227.57,350.73 225.26,373.15 " fill="none" id="80docker-to-80webProd" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="224.68,378.36,229.6575,369.8615,225.2369,373.3911,221.7072,368.9705,224.68,378.36" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[61323abf26bab5d1b04916da505b1a4b]
link 80webProd to Apache--><g id="link_80webProd_Apache"><path d="M230.38,389.79 C250.26,403.16 312.18,444.81 353.35,472.5 " fill="none" id="80webProd-to-Apache" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="357.52,475.31,352.2899,466.9646,353.373,472.5168,347.8207,473.5999,357.52,475.31" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f13cc59805c65a88679534905da7efc3]
link 5432db to db--><g id="link_5432db_db"><path d="M393.04,618.91 C394.37,624.7 397.09,633.94 402,640.5 C419.64,664.08 445.74,684.07 468.31,698.58 " fill="none" id="5432db-to-db" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="472.77,701.4,467.2976,693.2114,468.5429,698.7295,463.0248,699.9748,472.77,701.4" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4b0618b4e3023e5b59a6a84a97d00a55]
@startuml prod+db_deployment

actor Browser
component Server {
  port "80" as 80docker
  rectangle "Docker Compose - profile 'prod+db'" as docker {
    node "oem-postgis" {
      port 5432 as 5432db
      database "PostGIS DB" as db
    }
    node promtail {
      component promtail as promInst
      folder "/etc/promtail" as promRem
      folder "/var/log" as logRem
      folder "/var/lib/docker/containers" as contRem
    }
    node "oem-web-prod" {
      port "80" as 80webProd
      component Apache
    }
  }
  folder "promtail" as promLoc
  folder "/var/log" as logLoc
  folder "/var/lib/docker/containers" as contLoc
}
cloud Grafana {
  component Loki
}
Loki <- - promInst

promRem - - - promLoc : volume
logRem - - - logLoc : volume
contRem - - - contLoc : volume

Apache - -> 5432db

Browser - -> 80docker

80docker - -> 80webProd

80webProd - -> Apache
5432db - -> db

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: it
Country: IT
--></g></svg>