# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

# https://github.com/meysholdt/laravel-apache-mysql-php-in-gitpod-example

tasks:
  - name: npm
    before: cd osm-wikidata-map-framework-etymology
    init: npm install
    command: npm run watch
  - name: php
    before: cd osm-wikidata-map-framework-etymology
    init: composer install
  - name: Apache
    env:
      OWMF_ROOT: /workspace/open-etymology-map/osm-wikidata-map-framework-etymology
    before: ln -s osm-wikidata-map-framework-etymology/public public
    init: >
        cp .env.example "$OWMF_ROOT/.env"
        sed -i "s|/var/www/html|$OWMF_ROOT/public|" "$OWMF_ROOT/.env"
    command: >
        apachectl start;
        multitail /var/log/apache2/error.log -I /var/log/apache2/access.log

ports:
  - name: Apache
    port: 8001
    onOpen: ignore
  - name: npm
    port: 8888
    onOpen: ignore

vscode:
  extensions:
    - dbaeumer.vscode-eslint
    - bmewburn.vscode-intelephense-client
    - mhutchie.git-graph
